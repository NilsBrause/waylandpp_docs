<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wayland++: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wayland++
   &#160;<span id="projectnumber">0.2.6</span>
   </div>
   <div id="projectbrief">C++ Bindings for Wayland</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Wayland is an object oriented display protocol, which features request and events. Requests can be seen as method calls on certain objects, whereas events can be seen as signals of an object. This makes the Wayland protocol a perfect candidate for a C++ binding.</p>
<p>The goal of this library is to create such a C++ binding for Wayland using the most modern C++ technology currently available, providing an easy to use C++ API to Wayland.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Requirements</h1>
<p>To build this library, a recent version of cmake is required. Furthermore, a recent C++ Compiler with C++11 support, such as GCC or clang, is required. Also, pugixml is required to build the XML protocol scanner. Apart from the Wayland libraries, there are no further library dependencies.</p>
<p>The documentation is autogenerated using Doxygen, therefore doxygen as well as graphviz is required.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Building</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Library</h2>
<p>To build the library, <code>cmake ..</code> needs to executed in a newly created <code>build</code> directory in the root directory of the repository, followed by a <code>make</code>. After that, <code>make install</code> will install the library.</p>
<p>There are several CMake variables that can be set in order to customise the build and install process:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CMake Variable  </th><th class="markdownTableHeadNone">Effect   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CMAKE_CXX_COMPILER</code>  </td><td class="markdownTableBodyNone">C++ compiler to use   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CMAKE_CXX_FLAGS</code>  </td><td class="markdownTableBodyNone">Additional flags for the C++ compiler   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CMAKE_INSTALL_PREFIX</code>  </td><td class="markdownTableBodyNone">Prefix folder, under which everything is installed   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CMAKE_INSTALL_LIBDIR</code>  </td><td class="markdownTableBodyNone">Library folder relative to the prefix   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CMAKE_INSTALL_INCLUDEDIR</code>  </td><td class="markdownTableBodyNone">Header folder relative to the prefix   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CMAKE_INSTALL_BINDIR</code>  </td><td class="markdownTableBodyNone">Binary folder relative to the prefix   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CMAKE_INSTALL_DATAROOTDIR</code>  </td><td class="markdownTableBodyNone">Shared folder relative to the prefix   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CMAKE_INSTALL_DOCDIR</code>  </td><td class="markdownTableBodyNone">Dcoumentation folder relative to the prefix   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CMAKE_INSTALL_MANDIR</code>  </td><td class="markdownTableBodyNone">Manpage folder relative to the prefix   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>BUILD_SCANNER</code>  </td><td class="markdownTableBodyNone">Whether to build the scanner   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>BUILD_LIBRARIES</code>  </td><td class="markdownTableBodyNone">Whether to build the libraries   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>BUILD_DOCUMENTATION</code>  </td><td class="markdownTableBodyNone">Whether to build the documentation   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>BUILD_EXAMPLES</code>  </td><td class="markdownTableBodyNone">Whether to build the examples   </td></tr>
</table>
<p>The installation root can also be changed using the environment variable <code>DESTDIR</code> when using <code>make install</code>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Documentation</h2>
<p>If the requirements are met, the documentation will normally be built automatically. HTML pages, LaTeX source files as well as manpages are generated.</p>
<p>To build the documentation manually, <code>doxygen</code> needs to be executed in the root directory of the repository. The resulting documentation can then be found in the <code>doc</code> directory. The required Doxyfile is available after the library has been built. The documentaion is also online availabe <a href="http://nilsbrause.de/waylandpp/">here</a>.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Example programs</h2>
<p>To build the example programs the <code>BUILD_EXAMPLES</code> option needs to be enabled during the build. The resulting binaries will be put under the <code>example</code> directory inside the build directory. They can be run directly without installing the library first.</p>
<p>To build the example programs manually, <code>make</code> can executed in the example directory after the library has been built and installed.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Usage</h1>
<p>In the following, it is assumed that the reader is familiar with basic Wayland concepts and at least version 11 of the C++ programming language.</p>
<p>Each interface is represented by a class. E.g. the <code>wl_registry</code> interface is represented by the <code>registry_t</code> class.</p>
<p>An instance of a class is a wrapper for a Wayland object (a <code>wl_proxy</code> pointer). If a copy is made of a particualr instance, both instances refer to the same Wayland object. The underlying Wayland object is destroyed once there are no copies of this object left. Only a few classes are non-copyable, namely <code>display_t</code> and <code>egl_window_t</code>. There are also special rules for proxy wrappers and the use of foreigen objects. Refer to the documentation for more details.</p>
<p>A request to an object of a specific interface corresponds to a method in this class. E.g. to marshal the <code>create_pool</code> request on an <code>wl_shm</code> interface, the <code>create_pool()</code> method of an instance of <code>shm_t</code> has to be called: </p><pre class="fragment">shm_t shm;
int fd;
int32_t size;
// ... insert the initialisation of the above here ...
shm_pool_t shm_pool = shm.create_pool(fd, size);
</pre><p>Some methods return newly created instances of other classes. In this example an instance of the class <code>shm_pool_t</code> is returned.</p>
<p>Events are implemented using function objects. To react to an event, a function object with the correct signature has to be assigned to it. These can not only be static functions, but also member functions or closures. E.g. to react to global events from the registry using a lambda expression, one could write: </p><pre class="fragment">registry.on_global() = [] (uint32_t name, std::string interface,
                           uint32_t version)
  { std::cout &lt;&lt; interface &lt;&lt; " v" &lt;&lt; version &lt;&lt; std::endl; };
</pre><p>An example for using member functions can be found in example/opengles.cpp or <a class="el" href="shm_8cpp_source.html">example/shm.cpp</a>.</p>
<p>The Wayland protocol uses arrays in some of its events and requests. Since these arrays can have arbitrary content, they are not directly mapped to a std::vector. Instead there is a new type array_t, which can converted to and from a std::vectory with an user specified type. For example: </p><pre class="fragment">keyboard.on_enter() = [] (uint32_t serial, surface_t surface,
                          array_t keys)
  { std::vector&lt;uint32_t&gt; vec = keys; };
</pre><p>To compile code that using this library, pkg-config can be used to take care of the compiler flags. Assuming the source file is called <code>foo.cpp</code> and the executable shall be called <code>foo</code> type: </p><pre class="fragment">$ c++ -c foo.cpp `pkg-config --cflags wayland-client++` -o foo.o
$ c++ foo.o `pkg-config --libs wayland-client++` -o foo
</pre><p>If the library and headers are installed in the default search paths of the compiler, the linker flag <code>-lwayland-client++</code> can also directly be specified on the command line.</p>
<p>If the Wayland cursor classes and/or EGL is used, the corresponding libreries <code>wayland-cursor++</code> and/or <code>wayland-egl++</code> need to be linked in as well. If any extension protocols such as xdg-shell are used, the library <code>wayland-client-extra++</code> should be linked in as well.</p>
<p>Further examples can be found in the examples/Makefile. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Oct 8 2019 20:07:41 for Wayland++ by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
